/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */

 !function(e){function t(t,a){if(this.element=t,this.options=e.extend({},i,a),e(this.element).data("max-height",this.options.maxHeight),e(this.element).data("height-margin",this.options.heightMargin),delete this.options.maxHeight,this.options.embedCSS&&!o){var n=".readmore-js-toggle, .readmore-js-section { "+this.options.sectionCSS+" } .readmore-js-section { overflow: hidden; }";!function(e,t){var s=e.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(s)}(document,n),o=!0}this._defaults=i,this._name=s,this.init()}var s="readmore",i={speed:100,maxHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,sectionCSS:"display: block; width: 100%;",startOpen:!1,expandedClass:"readmore-js-expanded",collapsedClass:"readmore-js-collapsed",beforeToggle:function(){},afterToggle:function(){}},o=!1;t.prototype={init:function(){var t=this;e(this.element).each(function(){var s=e(this),i=s.css("max-height").replace(/[^-\d\.]/g,"")>s.data("max-height")?s.css("max-height").replace(/[^-\d\.]/g,""):s.data("max-height"),o=s.data("height-margin");if("none"!=s.css("max-height")&&s.css("max-height","none"),t.setBoxHeight(s),s.outerHeight(!0)<=i+o)return!0;s.addClass("readmore-js-section "+t.options.collapsedClass).data("sliderHeight",i);var a=t.options.startOpen?t.options.lessLink:t.options.moreLink;s.after(e(a).on("click",function(e){t.toggleSlider(this,s,e)}).addClass("readmore-js-toggle")),t.options.startOpen||s.css({height:i})}),e(window).on("resize",function(e){t.resizeBoxes()})},toggleSlider:function(t,s,i){i.preventDefault();var o=this,a=newLink=sectionClass="",n=!1,h=e(s).data("sliderHeight");e(s).height()==h?(a=e(s).data().boxHeight+"px",newLink="lessLink",n=!0,sectionClass=o.options.expandedClass):(a=h,newLink="moreLink",sectionClass=o.options.collapsedClass),o.options.beforeToggle(t,s,n),e(s).animate({height:a},{duration:o.options.speed,complete:function(){o.options.afterToggle(t,s,n),e(t).replaceWith(e(o.options[newLink]).on("click",function(e){o.toggleSlider(this,s,e)}).addClass("readmore-js-toggle")),e(this).removeClass(o.options.collapsedClass+" "+o.options.expandedClass).addClass(sectionClass)}})},setBoxHeight:function(e){var t=e.clone().css({height:"auto",width:e.width(),overflow:"hidden"}).insertAfter(e),s=t.outerHeight(!0);t.remove(),console.log(s),e.data("boxHeight",s)},resizeBoxes:function(){var t=this;e(".readmore-js-section").each(function(){var s=e(this);t.setBoxHeight(s),(s.height()>s.data("boxHeight")||s.hasClass(t.options.expandedClass)&&s.height()<s.data("boxHeight"))&&s.css("height",s.data("boxHeight"))})},destroy:function(){var t=this;e(this.element).each(function(){var s=e(this);s.removeClass("readmore-js-section "+t.options.collapsedClass+" "+t.options.expandedClass).css({"max-height":"",height:"auto"}).next(".readmore-js-toggle").remove(),s.removeData()})}},e.fn[s]=function(i){var o=arguments;return void 0===i||"object"==typeof i?this.each(function(){if(e.data(this,"plugin_"+s)){var o=e.data(this,"plugin_"+s);o.destroy.apply(o)}e.data(this,"plugin_"+s,new t(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?this.each(function(){var a=e.data(this,"plugin_"+s);a instanceof t&&"function"==typeof a[i]&&a[i].apply(a,Array.prototype.slice.call(o,1))}):void 0}}(jQuery);